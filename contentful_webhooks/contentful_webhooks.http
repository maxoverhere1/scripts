### Contentful Webhook Management - HTTP/curl commands
### Based on: https://www.contentful.com/developers/docs/webhooks/configure-webhook/

# Your Contentful credentials
@space_id = nuloos7fnddp
@environment = dev
@management_token = xxx
@base_url = https://api.contentful.com

### 1. List all webhooks
GET {{base_url}}/spaces/{{space_id}}/webhook_definitions
Authorization: Bearer {{management_token}}
Content-Type: application/vnd.contentful.management.v1+json

### 2. Get specific webhook (replace WEBHOOK_ID with actual ID)
GET {{base_url}}/spaces/{{space_id}}/webhook_definitions/WEBHOOK_ID
Authorization: Bearer {{management_token}}
Content-Type: application/vnd.contentful.management.v1+json

### 3. Create webhook for local development server
POST {{base_url}}/spaces/{{space_id}}/webhook_definitions
Authorization: Bearer {{management_token}}
Content-Type: application/vnd.contentful.management.v1+json

{
  "name": "Local Development Webhook",
  "url": "https://9e791b031869.ngrok-free.app/webhook",
  "topics": ["Entry.publish", "Release.publish"],
  "filters": [
        [
          "dev"
        ]
  ],
  "headers": [
    {
      "key": "X-Local-Dev",
      "value": "true"
    }
  ]
}

### 4. Create webhook with HTTP Basic Auth
POST {{base_url}}/spaces/{{space_id}}/webhook_definitions
Authorization: Bearer {{management_token}}
Content-Type: application/vnd.contentful.management.v1+json

{
  "name": "Authenticated Webhook",
  "url": "https://your-secure-endpoint.com/webhook",
  "topics": ["Entry.publish", "Asset.publish"],
  "filters": [],
  "httpBasicUsername": "your_username",
  "httpBasicPassword": "your_password"
}

### 5. Delete webhook (replace WEBHOOK_ID with actual ID)
DELETE {{base_url}}/spaces/{{space_id}}/webhook_definitions/WEBHOOK_ID
Authorization: Bearer {{management_token}}
Content-Type: application/vnd.contentful.management.v1+json
